<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="assets/css/bootstrap.min.511.css" rel="stylesheet" />
    <script src="assets/js/bootstrap.min.js"></script>
    <script data-ffc-client="MzZlLTY1MTAtNCUyMDIxMTEwMTE0NTIwNF9fNV9fNl9fMTJfX2RlZmF1bHRfYzVlNzU=" async src="https://assets.feature-flags.co/sdks/ffc-sdk.js"></script>
    <!-- <script data-ffc-client="MzZlLTY1MTAtNCUyMDIxMTEwMTE0NTIwNF9fNV9fNl9fMTJfX2RlZmF1bHRfYzVlNzU=" async src="../umd/ffc-sdk.js"></script> -->
    <!-- <script data-ad-client="ca-pub-3349787729360682" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
    <title>feature-flags.co</title>
</head>

<body style="background-color: rgb(217 239 233);">
    <div class="container" id="version-a">
        <div class="row">
            <h3>产品经理版1</h3>
            <a href="#" style="font-size: 32px;">开始使用</a>
        </div>
    </div>
    <div class="container" id="version-b">
        <div class="row">
            <h3>程序员版1</h3>`
            <a href="#" style="font-size: 32px;">开始使用</a>
        </div>
    </div>
    <div class="container" id="version-c">
        <div class="row">
            <h3>产品经理版2</h3>
            <a href="#" style="font-size: 32px;">开始使用</a>
        </div>
    </div>

    <div class="welcome"><span>欢迎新同学</span> <a href="#">Onboarding</a></div>
    <div class="welcomeb"><span>欢迎新同学b</span> <a href="#">Onboardingb</a></div>
    <style>
        .row {
            margin-top: 20px;
            text-align: center;
        }

        #version-a {
            display: none;
        }

        #version-b {
            display: none;
        }

        #version-c {
            display: none;
        }
    </style>

    <script src="http://pv.sohu.com/cityjson?ie=utf-8"></script>
    <script type="text/javascript">
     window.onload = (event) => {
        let userName = Date.now();

        // 初始化sdk，传入环境Secret Key和用户信息
        //FFCJsClient.initialize('MzZlLTY1MTAtNCUyMDIxMTEwMTE0NTIwNF9fNV9fNl9fMTJfX2RlZmF1bHRfYzVlNzU=', null, {baseUrl: 'https://ffc-api-ce2-dev.chinacloudsites.cn'});

        // 初始化用户信息，通常这一步会在登录后被调用
        // FFCJsClient.initUserInfo({
        //     userName: 'sdk-sample-js-1252',
        //     email: 'abc@myemail.com',
        //     key: 'sdk-sample-js-1252',
        //     customizeProperties: [
        //         {
        //             name: "外放地址",
        //             value: "?from=zhihu&group=pm"
        //         }
        //     ]
        // });
        let result = FFCJsClient.variation('主页---话术版本', '产品经理版1');

        if (result === '产品经理版1') {
            document.getElementById('version-a').style.display = 'block';
        }
        else if (result === '程序员版1') {
            document.getElementById('version-b').style.display = 'block';
        }
        else if (result === '产品经理版2') {
            document.getElementById('version-c').style.display = 'block';
        }
        else {
            document.getElementById('version-a').style.display = 'block';
        }


        // let data = [{
        //     type: 'Click',
        //     route: window.location.href,
        //     eventName: 'click event'
        // }];

        // FFCJsClient.trackAsync(data);

        // data = [{
        //     type: 'PageView',
        //     route: window.location.href,
        //     eventName: 'pageview event'
        // }];

        // FFCJsClient.trackAsync(data);
        document.addEventListener("click", async function (e) {
            if (e.target && e.target.innerText == '使用文档' ||
                e.target && e.target.innerText == '开始使用') {

                let rt = await FFCJsClient.trackCustomEventAsync([
                    {
                        eventName: "开始使用点击事件",
                        numericValue: 1 // 可选参数，默认值为1
                    }
                ]);
                if (rt == true)
                    alert("事件发送成功");
                else
                    alert("事件发送失败");
            }
        });
     }
    </script>
</body>

</html>